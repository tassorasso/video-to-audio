let co=window.crossOriginIsolated;if(!co){let r=window.navigator.serviceWorker;if(r){r.register(window.document.currentScript.src).then(t=>console.log("coi req",t)).catch(e=>console.error("coi err",e));}else{window.location.reload()}}else{console.log("coi active")}
self.addEventListener("install",()=>self.skipWaiting());self.addEventListener("activate",e=>e.waitUntil(self.clients.claim()));self.addEventListener("fetch",e=>{let {request:r}=e;if(r.cache==="only-if-cached"&&r.mode!=="same-origin")return;e.respondWith(fetch(r).then(r=>{if(r.status===0)return r;const h=new Headers(r.headers);h.set("Cross-Origin-Embedder-Policy","require-corp");h.set("Cross-Origin-Opener-Policy","same-origin");return new Response(r.body,{status:r.status,statusText:r.statusText,headers:h})}))});